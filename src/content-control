import { todoArray } from "./create-todo-item";

export function addTodoArrayToContent() {
    todoArray.forEach(item => {
        const taskContainer = document.querySelector('.task-container');
        
        const itemContainer = document.createElement('div');
        itemContainer.classList.add('itemContainer');
        taskContainer.appendChild(itemContainer);

        const itemTitle = document.createElement('div');
        itemTitle.classList.add('task-item-title');
        itemTitle.textContent = item.title;
        itemContainer.appendChild(itemTitle);

        const description = document.createElement('div');
        description.classList.add('task-item-description');
        description.textContent = item.description;
        itemContainer.appendChild(description);

        const dateInput = document.createElement('input');
        dateInput.classList.add('task-item-date');
        dateInput.value = item.date;
        dateInput.setAttribute('type', 'date');
        itemContainer.appendChild(dateInput);

        itemContainer.appendChild(createPriorityLabel('high', 'High'));
        itemContainer.appendChild(createPriorityInput('high'));

        itemContainer.appendChild(createPriorityLabel('medium', 'Medium'));
        itemContainer.appendChild(createPriorityInput('medium'));

        itemContainer.appendChild(createPriorityLabel('low', 'Low'));
        itemContainer.appendChild(createPriorityInput('low'));

        let priority = document.querySelectorAll('input[name="priority-dom"]');
        priority.forEach(p => {
            if (p.classList.contains('checked')) {
                return;
            } else if (p.value == item.priority) {
                p.checked = true;
            }
            p.classList.add('checked');
        })
    })
}

function createPriorityLabel(priority, text) {
    const label = document.createElement('label');
    label.setAttribute('for', priority);
    label.textContent = text;
    return label;
}

function createPriorityInput(priority) {
    const input = document.createElement('input');
    input.setAttribute('id', priority);
    input.setAttribute('type', 'radio');
    input.setAttribute('name', 'priority-dom');
    input.setAttribute('value', priority);
    return input;
}

export function displayNewItem() {
    let itemContainer = document.querySelectorAll('.itemContainer');
    itemContainer.forEach(itemContainer => {
      itemContainer.remove();
    })
}
